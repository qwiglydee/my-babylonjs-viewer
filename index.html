<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>My3D demo page</title>
        <link rel="stylesheet" href="bootstrap.min.css" />
        <style>
            our-app {
                position: relative;
                display: block;
                overflow: hidden;
            }

            my-viewer {
                width: 100%;
                height: 100%;
                min-height: 720px;
                --my-background-color: var(--bs-dark);
                overflow: hidden;
            }
        </style>
        <script src="src/utils/fullscreen.js"></script>
        <script type="module" src="src/index.js"></script>
    </head>

    <body class="container bg-light">
        <h2>Интерактивная 3d визуализация</h2>
        <hr>
        <our-app class="row justify-content-md-center">
            <div class="col mb-3">
                <my-viewer class="border rounded-2">
                    <my-camera-arc autoSpin autoZoom autoFocus></my-camera-arc>
                    <my-environ sky skyIntens="0.1" skyBlur="0.75"></my-environ>
                    <my-ground autoSize></my-ground>
                    <my-stuff radius="5" count="3" shuffling></my-stuff>

                    <div slot="overlay" style="position: absolute; top: 4px; left: 4px;">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                            <path d="M520-360h120q33 0 56.5-23.5T720-440v-80q0-33-23.5-56.5T640-600H520v240Zm60-60v-120h60q8 0 14 6t6 14v80q0 8-6 14t-14 6h-60Zm-320 60h140q17 0 28.5-11.5T440-400v-40q0-17-11.5-28.5T400-480q17 0 28.5-11.5T440-520v-40q0-17-11.5-28.5T400-600H260v60h120v30h-80v60h80v30H260v60ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-480H160v480Zm0 0v-480 480Z"></path>
                        </svg>
                    </div>
                    <div slot="overlay" style="position: absolute; bottom: 4px; right: 4px;">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                            <path d="M473-80q-24 0-46-9t-39-26L184-320l30-31q16-16 37.5-21.5t42.5.5l66 19v-327q0-17 11.5-28.5T400-720q17 0 28.5 11.5T440-680v433l-97-27 102 102q5 5 12.5 8.5T473-160h167q33 0 56.5-23.5T720-240v-160q0-17 11.5-28.5T760-440q17 0 28.5 11.5T800-400v160q0 66-47 113T640-80H473Zm7-280v-160q0-17 11.5-28.5T520-560q17 0 28.5 11.5T560-520v160h-80Zm120 0v-120q0-17 11.5-28.5T640-520q17 0 28.5 11.5T680-480v120h-80Zm-20 80Zm300-400H680v-60h116q-66-58-147-89t-169-31q-88 0-169 31t-147 89h116v60H80v-200h60v81q72-59 159-90t181-31q94 0 181 31t159 90v-81h60v200Z"></path>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                            <path d="M80-80v-60h81q-59-72-90-159T40-480q0-94 31-181t90-159H80v-60h200v200h-60v-116q-58 66-89 147t-31 169q0 88 31 169t89 147v-116h60v200H80Zm578-47q-23 8-46.5 7.5T566-131L304-253l18-40q10-20 28-32.5t40-14.5l68-5-112-307q-6-16 1-30.5t23-20.5q16-6 30.5 1t20.5 23l148 407-100 7 131 61q7 3 15 3.5t15-1.5l157-57q31-11 45-41.5t3-61.5l-55-150q-6-16 1-30.5t23-20.5q16-6 30.5 1t20.5 23l55 150q23 63-4.5 122.5T815-184l-157 57Zm-90-265-54-151q-6-16 1-30.5t23-20.5q16-6 30.5 1t20.5 23l55 150-76 28Zm113-41-41-113q-6-16 1-30.5t23-20.5q16-6 30.5 1t20.5 23l41 112-75 28Zm8 88Z"></path>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                            <path d="M419-80q-28 0-52.5-12T325-126L107-403l19-20q20-21 48-25t52 11l74 45v-328q0-17 11.5-28.5T340-760q17 0 29 11.5t12 28.5v472l-97-60 104 133q6 7 14 11t17 4h221q33 0 56.5-23.5T720-240v-160q0-17-11.5-28.5T680-440H461v-80h219q50 0 85 35t35 85v160q0 66-47 113T640-80H419ZM167-620q-13-22-20-47.5t-7-52.5q0-83 58.5-141.5T340-920q83 0 141.5 58.5T540-720q0 27-7 52.5T513-620l-69-40q8-14 12-28.5t4-31.5q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 17 4 31.5t12 28.5l-69 40Zm335 280Z"></path>
                        </svg>      
                    </div>
                </my-viewer>
            </div>
            <div class="col-12 col-md-auto">
                <div class="card bg-primary-subtle mb-3">
                    <div class="card-header">Модель</div>
                    <div class="card-body">менюшки</div>
                </div>
                <div class="card bg-primary-subtle mb-3">
                    <div class="card-header">Расцветка</div>
                    <div class="card-body">менюшки</div>
                </div>
                <div class="card bg-primary-subtle mb-3">
                    <div class="card-header">Комплектация</div>
                    <div class="card-body">менюшки менюшки менюшки</div>
                </div>
            </div>
        </our-app>
        <hr class="hr" />
        <section class="bg-body border rounded p-3">
            <h2>Описание</h2>
        </section>

        <script>
            /* debugging */
            var app = document.querySelector("our-app");
            var my = {
                viewer: document.querySelector("my-viewer"),
                environ: document.querySelector("my-environ"),
                ground: document.querySelector("my-ground"),
                stuff: document.querySelector("my-stuff"),
                camera: document.querySelector("my-camera-arc"),
            };

            my.viewer.addEventListener("babylon.updated", function (e) {
                console.debug(e.type, e.detail);
            });

            my.viewer.addEventListener("babylon.picked", function (e) {
                console.debug(e.type, e.detail);
            });
        </script>

        <script type="module">
            /* debugging */
            import { Vector3, Color3 } from "@babylonjs/core/Maths";
            window.V3 = Vector3;
            window.C3 = Color3;
        </script>
    </body>
</html>
